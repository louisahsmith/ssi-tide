---
title: "Portland Maine Tide Chart"
output: html_document
---

<style>
h1.title{font-size:28px;}
</style>

<link rel="manifest" href="manifest.json"></link>
<script src="service-worker.js"></script>


```{r setup, include=FALSE, cache = FALSE}
knitr::opts_chunk$set(echo = FALSE, fig.height = 8)

library(flexdashboard)
# Install thematic and un-comment for themed static plots (i.e., ggplot2)
# thematic::thematic_rmd()
library(lubridate)
library(ggplot2)
library(rtide)
library(dplyr)
library(ggpmisc)
library(stringr)
library(httr)
library(glue)
library(jsonlite)
library(tidyr)
library(purrr)
library(htmltools)

#source("R/key.R")
source("R/functions.R")

# saveRDS(weatherData, "wd.rds")
# saveRDS(tideData, "td.rds")
# 
weatherData = readRDS("wd.rds")
tideData = readRDS("td.rds")

tideData = getTideData()
dailyWeather = getWeatherData()

```

```{r panelset, echo=FALSE}
xaringanExtra::use_panelset()
```

::: l-screen

::::: {.panelset}


::: {.panel}

## Yesterday {.panel-name}


```{r, echo = FALSE}
p1 = tideData %>%
    filter(date == as.Date(Sys.time(), tz = "EST5EDT")-1)

getPlot(p1, tideData)
```

```{r, echo = FALSE}
hr()
```

```{r, echo = FALSE}
date = as.Date(Sys.time(), tz = "EST5EDT")-1
getTextSummary(dailyWeather = dailyWeather, date = date)
```

:::

::: {.panel}

## Today {.panel-name}


```{r, echo = FALSE}
p1 = tideData %>%
    filter(date == as.Date(Sys.time(), tz = "EST5EDT"))

getPlot(p1, tideData)
```

```{r, echo = FALSE}
hr()
```

```{r, echo = FALSE}
date = as.Date(Sys.time(), tz = "EST5EDT")
getTextSummary(dailyWeather = dailyWeather, date = date)
```

:::


::: {.panel}

## Tomorrow {.panel-name}

```{r, echo = FALSE}
p2 = tideData %>%
    filter(date == as.Date(Sys.time(), tz = "EST5EDT")+1)

getPlot(p2, tideData)
```

```{r, echo = FALSE}
hr()
```


```{r, echo = FALSE}
date = as.Date(Sys.time(), tz = "EST5EDT")+1
getTextSummary(dailyWeather = dailyWeather, date = date)
```
:::


:::::

:::



